<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.21.0">
    <meta name="project" content="ada v0.1.0">
    <title>Ada — ada v0.1.0</title>
    <link rel="stylesheet" href="dist/html-6533ecd75f89a4bc2271.css" />
    <script src="dist/sidebar_items-a43bfa0594.js"></script>
      <script src="docs_config.js"></script>
    <script async src="dist/html-6533ecd75f89a4bc2271.js"></script>
  </head>
  <body data-type="extras">
    <script>try { if(localStorage.getItem('night-mode') === 'true') document.body.className += ' night-mode'; } catch (e) { }</script>
<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button">
      <span class="icon-cross" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" id="search-list" class="search-input" placeholder="Search..." aria-label="Search" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName">
ada      </a>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

      <li><a id="modules-list" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>Ada</h1>
<p><a href="https://circleci.com/gh/cloud8421/ada"><img src="https://circleci.com/gh/cloud8421/ada.svg?style=svg&amp;circle-token=e4d5543095470815e9108a94840d4e57c4f77070" alt="CircleCI"/></a></p>
<p>Ada is personal assistant designed to run on the <a href="https://shop.pimoroni.com/products/scroll-bot-pi-zero-w-project-kit">Pimoroni Scroll Bot</a> (i.e. a <a href="https://www.raspberrypi.org/products/raspberry-pi-zero-w/">Raspberry Pi Zero W </a> and a <a href="https://shop.pimoroni.com/products/scroll-phat-hd">Scroll pHAT HD</a>).</p>
<p>It’s powered by <a href="https://nerves-project.org">Nerves Project</a> and <a href="https://elixir-lang.org">Elixir</a>.</p>
<p align="center">
  <img alt="Ada Device" src="https://github.com/cloud8421/ada/blob/master/ada.jpg?raw=true">
</p><h2 id="features" class="section-heading">
  <a href="#features" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Features
</h2>

<p>Ada fits a specific use case: a small device, using little energy, that helps me with things I do on a daily basis. Hardware-wise, the Pimoroni kit is a perfect fit: it looks cool, has a low-fi screen that I can use to report basic useful information even in bright light conditions and I can pack it with me when I travel.</p>
<p>At this point Ada support these workflows:</p>
<ul>
<li>Email me Guardian News about a specific topic (via <a href="https://open-platform.theguardian.com/documentation/">theguardian / open platform</a>)
</li>
<li>Email me the weather forecast for the day at a specific location (via <a href="https://darksky.net/dev">Dark Sky</a>)
</li>
<li>Email me what I’ve listened to in the last day/week (via <a href="https://www.last.fm/api">Last.fm</a>)
</li>
</ul>
<p>Workflows can be scheduled at hourly, daily or weekly intervals, with configurable parameters like locations or email recipients.</p>
<p>The display is used primarily as a digital clock, but it can display if one or more scheduled tasks are running.</p>
<p>Ada’s timezone can be configured and its clock is synchronised automatically.</p>
<p>Ada’s default email adapter is <a href="https://sendgrid.com/docs/for-developers/sending-email/api-getting-started/">Sendgrid</a>.</p>
<p>Ada’s default backup strategy uses <a href="https://www.dropbox.com/developers/apps">Dropbox via a custom app</a>.</p>
<h2 id="interaction-modes" class="section-heading">
  <a href="#interaction-modes" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Interaction modes
</h2>

<p>Ada can be controlled by a command line UI (CLI) and an HTTP API.</p>
<h3 id="cli-interaction" class="section-heading">
  <a href="#cli-interaction" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  CLI interaction
</h3>

<p>The CLI can be setup by <a href="#Build-the-CLI">following these instructions</a>. To function, it requires the ability to connect to the running device via the Erlang distribution. By default, it will assume that the target device is available at <code class="inline">ada.local</code>.</p>
<p>Running <code class="inline">./ada</code> will show a list of available commands. If you happen to use the <a href="https://fishshell.com">Fish shell</a>, you can run <code class="inline">./ada fish_autocomplete | source</code> to load basic completions for the current shell (pull requests are welcome to support other shells!).</p>
<p>Generally speaking, with the CLI you can:</p>
<ul>
<li>control the display brightness
</li>
<li>manage device data (users, locations, tasks)
</li>
<li>manage device preferences
</li>
<li>run or preview tasks
</li>
<li>backup the database with the active backup strategy
</li>
<li>pull the device database to a local file
</li>
<li>restore the device database from a local file
</li>
</ul>
<p>As an example, we can add a new user and setup a news digest about UK news, sent every day at 9am:</p>
<pre><code class="nohighlight makeup elixir"><samp class="err">$</samp><samp class="w"> </samp><samp class="o">.</samp><samp class="o">/</samp><samp class="n">ada</samp><samp class="w"> </samp><samp class="n">create_user</samp><samp class="w"> </samp><samp class="n">mary</samp><samp class="w"> </samp><samp class="n">mary</samp><samp class="na">@example</samp><samp class="o">.</samp><samp class="n">com</samp><samp class="w">

  </samp><samp class="nc">Created</samp><samp class="w"> </samp><samp class="nc">User</samp><samp class="w"> </samp><samp class="k">with</samp><samp class="w"> </samp><samp class="nc">ID</samp><samp class="w"> </samp><samp class="mi">3</samp><samp class="w">

</samp><samp class="err">$</samp><samp class="w"> </samp><samp class="o">.</samp><samp class="o">/</samp><samp class="n">ada</samp><samp class="w"> </samp><samp class="n">create_scheduled_task</samp><samp class="w"> </samp><samp class="n">send_news_by_tag</samp><samp class="w"> </samp><samp class="n">daily</samp><samp class="p">:</samp><samp class="mi">9</samp><samp class="w"> </samp><samp class="o">--</samp><samp class="n">user_id</samp><samp class="w"> </samp><samp class="mi">3</samp><samp class="w"> </samp><samp class="o">--</samp><samp class="n">tag</samp><samp class="w"> </samp><samp class="sc">&#39;uk/uk&#39;</samp><samp class="w">

  </samp><samp class="nc">Created</samp><samp class="w"> </samp><samp class="n">scheduled_task</samp><samp class="w"> </samp><samp class="k">with</samp><samp class="w"> </samp><samp class="nc">ID</samp><samp class="w"> </samp><samp class="mi">9</samp><samp class="w">
</samp></code></pre>
<p>You can run a task (irrespectively of its frequency) with:</p>
<pre><code class="nohighlight makeup elixir"><samp class="err">$</samp><samp class="w"> </samp><samp class="o">.</samp><samp class="o">/</samp><samp class="n">ada</samp><samp class="w"> </samp><samp class="n">run_scheduled_task</samp><samp class="w"> </samp><samp class="mi">9</samp></code></pre>
<p>If you&#39;re interested in previewing its data, the CLI can render a
shell-friendly version of a task&#39;s result with:</p>
<pre><code class="nohighlight makeup elixir"><samp class="err">$</samp><samp class="w"> </samp><samp class="o">.</samp><samp class="o">/</samp><samp class="n">ada</samp><samp class="w"> </samp><samp class="n">preview_scheduled_task</samp><samp class="w"> </samp><samp class="mi">9</samp><samp class="w"> </samp><samp class="o">|</samp><samp class="w"> </samp><samp class="n">less</samp><samp class="w"> </samp><samp class="o">-</samp><samp class="n">r</samp></code></pre>
<p>As shown in the example, you can pipe the result to <code class="inline">less -r</code> to scroll down
via keyboard in ANSI colors.</p>
<p>Current tasks render as follows:</p>
<p align="center">
  <img alt="Last.fm report shell preview" src="https://github.com/cloud8421/ada/blob/master/screenshots/last_fm.png?raw=true">
</p><p align="center">
  <img alt="Weather report shell preview" src="https://github.com/cloud8421/ada/blob/master/screenshots/weather.png?raw=true">
</p><p align="center">
  <img alt="News report shell preview" src="https://github.com/cloud8421/ada/blob/master/screenshots/news.png?raw=true">
</p><h3 id="http-interaction" class="section-heading">
  <a href="#http-interaction" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  HTTP interaction
</h3>

<p>HTTP api documentation is available at <code class="inline">http://ada.local/swagger-ui</code>.</p>
<h2 id="setup" class="section-heading">
  <a href="#setup" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Setup
</h2>

<p>First of all, we need working installations of Elixir and Erlang. The recommended way to achieve this is via <a href="https://asdf-vm.com/#/">asdf</a>. Once it&#39;s installed and working, you can run <code class="inline">asdf install</code> from the project root to install the correct versions required by Ada (see the <code class="inline">.tool-versions</code> file for details).</p>
<p>Next, make sure you setup the required environment variables as detailed in <code class="inline">.envrc.example</code>. We recommend using a program such as <a href="https://direnv.net">direnv</a> to make this process automatic.</p>
<p>To support over-the-air updates, the firmware requires an ssh public key at <code class="inline">~/.ssh/id_rsa.pub</code>. This is not needed unless you try to produce a firmware file.</p>
<p>Once they&#39;re setup, you can run <code class="inline">make dev.setup</code> to install required tools and dependencies. Note that this will not install system-wide dependencies which are required to burn the Ada firmware to a card (see the MacOS and Linux sections at <a href="https://hexdocs.pm/nerves/installation.html#content">https://hexdocs.pm/nerves/installation.html#content</a> for details).</p>
<p>At this stage, you should be able to perform the most common tasks:</p>
<h3 id="running-tests" class="section-heading">
  <a href="#running-tests" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Running tests
</h3>

<p>You can run <code class="inline">make host.test</code>.</p>
<h3 id="build-the-cli" class="section-heading">
  <a href="#build-the-cli" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Build the CLI
</h3>

<p>You can run <code class="inline">make host.cli</code>, which will leave you with the <code class="inline">ada</code> executable in the current directory. You can move it anywhere, but to function properly it requires a compatible version of Erlang available globally. You can checkout the <a href="https://asdf-vm.com/#/core-manage-versions?id=set-current-version">asdf documentation</a> to configure that.</p>
<h3 id="run-dialyzer" class="section-heading">
  <a href="#run-dialyzer" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Run dialyzer
</h3>

<p>You can run <code class="inline">make host.dialyzer</code> to perform a static analysis of the source code to find type inconsistencies. The first time you run it might take a while, it will be considerably faster after that.</p>
<h3 id="build-docs" class="section-heading">
  <a href="#build-docs" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Build docs
</h3>

<p>You can run <code class="inline">make host.docs</code>. Key parts of the source are documented, so this should help in case you feel like contributing.</p>
<h3 id="open-a-local-iex-session" class="section-heading">
  <a href="#open-a-local-iex-session" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Open a local iex session
</h3>

<p>You can run <code class="inline">make host.shell</code>.</p>
<h3 id="produce-a-firmware" class="section-heading">
  <a href="#produce-a-firmware" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Produce a firmware
</h3>

<p>You can run <code class="inline">make rpi0.firmware</code> to produce a firmware file. Running <code class="inline">make rpi0.burn</code> will produce a file and try to burn it to a SD/MicroSD card if possible.</p>
<h3 id="update-the-device-on-the-fly" class="section-heading">
  <a href="#update-the-device-on-the-fly" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Update the device on the fly
</h3>

<p>You can run <code class="inline">make rpi0.push</code> to perform a over-the-air device update.</p>
<h3 id="remote-shell-to-the-running-device" class="section-heading">
  <a href="#remote-shell-to-the-running-device" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Remote shell to the running device
</h3>

<p>You can run <code class="inline">make rpi0.ssh</code>.</p>
<h2 id="data-backups" class="section-heading">
  <a href="#data-backups" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Data backups
</h2>

<p>Ada is capable of backing up its own db file at 3am every night. To do that, it uses a configured backup strategy (with Dropbox being the one currently implemented). To activate it, it&#39;s enough to define a <code class="inline">DROPBOX_API_TOKEN</code> env variable (the token can be created at <a href="https://www.dropbox.com/developers/apps">https://www.dropbox.com/developers/apps</a>).</p>
<h2 id="commit-legend" class="section-heading">
  <a href="#commit-legend" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Commit legend
</h2>

<ul>
<li>[F] Feature
</li>
<li>[C] Chore
</li>
<li>[B] Bugfix
</li>
<li>[D] Documentation
</li>
<li>[R] Refactor
</li>
</ul>
      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.21.0),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>
  </body>
</html>
